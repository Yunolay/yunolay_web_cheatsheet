<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <header>
    <h1>Template</h1>
  </header>
  <main>
    <p>> <a herf="index.html">Home</a></p>
    <p>Template</p>
    <p>Basic infomation.</p>
    <p>Replace the environment variables.<br>If you are using environment variables, there is no need to replace them.</p>
    <p>Target ip: <input type="text" name="target-ip" id="target-ip"> <button type="button" id="updateButton">Reload</button></p>
    <p>Target port: <input type="text" name="target-port" id="target-port"> <button type="button" id="updateButton">Reload</button></p>
    <p>Target domain: <input type="text" name="target-domain" id="target-domain"> <button type="button" id="updateButton">Reload</button></p>
    <p>Local ip: <input type="text" name="local-ip" id="local-ip"> <button type="button" id="updateButton">Reload</button></p>
    <p>Local port: <input type="text" name="local-port" id="local-port"> <button type="button" id="updateButton">Reload</button></p>
    
    <h2>Use as a environment variables.</h2>
    <p>For example, you can use the following variables in your terminal.</p>
    <p id="command1">$<span id="commandText1">target_ip="<span id="default-target-ip">192.168.1.2</span>"; echo $target_ip</span><button id="copyButton1">Copy</button></p> 
    <p>Target ip: <input type="text" id="input-target-ip"> <button type="button" id="updateDefaltButton">Reload</button></p>
    <p id="command2">$<span id="commandText2">target_port="<span id="default-target-port">80</span>"; echo $target_port</span><button id="copyButton2">Copy</button></p>
    <p>Target port: <input type="text" id="input-target-port"> <button type="button" id="updateDefaltButton">Reload</button></p>
    <p id="command3">$<span id="commandText3">target_domain="<span id="default-target-domain">example.com</span>"; echo $target_domain</span><button id="copyButton3">Copy</button></p>
    <p>Target domain: <input type="text" id="input-target-domain"> <button type="button" id="updateDefaltButton">Reload</button></p>
    <p id="command4">$<span id="commandText4">local_ip="<span id="default-local-ip">192.168.1.100</span>"; echo $local_ip</span><button id="copyButton4">Copy</button></p>
    <p>Local ip: <input type="text" id="input-local-ip"> <button type="button" id="updateDefaltButton">Reload</button></p>
    <p id="command5">$<span id="commandText5">local_port="<span id="default-local-ip">4444</span>"; echo $local_port</span><button id="copyButton5">Copy</button></p>
    <p>Local port: <input type="text" id="input-local-port"> <button type="button" id="updateDefaltButton">Reload</button></p>

    <p>Check the environment variables.</p>
    <pre id="command">
$ echo $target_ip<br>
192.168.1.2<br>
<br>
$ echo $target_port<br>
80<br>
<br>
$ echo $target_domain<br>
example.com<br>
<br>
$ echo $local_ip<br> 
192.168.1.100<br>
<br>
$ echo $local_port<br>
4444</pre>
  </main>
 <footer>
  <p>> <a herf="index.html">Home</a></p>
</footer>
</body>

<script>

  document.getElementById('updateButton').addEventListener('click', function() {
    var targetIp = document.getElementById('target-ip').value;
    var targetPort = document.getElementById('target-port').value;
    var targetDomain = document.getElementById('target-domain').value;
    var localIp = document.getElementById('local-ip').value;
    var localPort = document.getElementById('local-port').value;

    var commandTextCount = 15;

    for (var i = 1; i <= commandTextCount; i++) {
      var commandTextId = 'commandText' + i;
      var commandElement = document.getElementById(commandTextId);
      var commandText = commandElement.textContent;

      if (targetIp) {
        commandText = commandText.replace(new RegExp('\\$target_ip', 'g'), targetIp);
      }
      if (targetPort) {
        commandText = commandText.replace(new RegExp('\\$target_port', 'g'), targetPort);
      }
      if (targetDomain) {
        commandText = commandText.replace(new RegExp('\\$target_domain', 'g'), targetDomain);
      }
      if (localIp) {
        commandText = commandText.replace(new RegExp('\\$local_ip', 'g'), localIp);
      }
      if (localPort) {
        commandText = commandText.replace(new RegExp('\\$local_port', 'g'), localPort);
      }

      commandElement.textContent = commandText;
    }
  });

  document.getElementById('updateDefaltButton').addEventListener('click', function() {
    var targetIp = document.getElementById('input-target-ip').value;
    var targetPort = document.getElementById('input-target-port').value;
    var targetDomain = document.getElementById('input-target-domain').value;
    var localIp = document.getElementById('input-local-ip').value;
    var localPort = document.getElementById('input-local-port').value;

    if (targetIp) {
      document.getElementById('commandText1').innerHTML = `target_ip="${targetIp}"; echo $target_ip`;
    }
    if (targetPort) {
      document.getElementById('commandText2').innerHTML = `target_port="${targetPort}"; echo $target_port`;
    }
    if (targetDomain) {
      document.getElementById('commandText3').innerHTML = `target_domain="${targetDomain}"; echo $target_domain`;
    }
    if (localIp) {
      document.getElementById('commandText4').innerHTML = `local_ip="${localIp}"; echo $local_ip`;
    }
    if (localPort) {
      document.getElementById('commandText5').innerHTML = `local_port="${localPort}"; echo $local_port`;
    }
  });

  var commandTextCount = 100;

  for (var i = 1; i <= commandTextCount; i++) {
      (function(i) {
          var copyButtonId = 'copyButton' + i;
          var commandTextId = 'commandText' + i;

          document.getElementById(copyButtonId).addEventListener('click', function() {
              var commandText = document.getElementById(commandTextId).textContent;
              navigator.clipboard.writeText(commandText).then(function() {
                  console.log('Copying to clipboard was successful!');
              }, function(err) {
                  console.error('Could not copy text: ', err);
              });
          });
      })(i);
  }
</script>

</html>